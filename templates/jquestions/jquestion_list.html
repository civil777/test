{% extends "base2.html" %}
{% load static %}

{% block content %}

      <!-- Main content -->
        <main class="container my-3 flex-1 max-h-full p-5 font-sans justify-center mx-auto">
          <!-- Main content header -->
          <div
            class="flex flex-col items-start justify-between pb-6 space-y-4 border-b lg:items-center lg:space-y-0 lg:flex-row mx-auto"
          >
            <h1 class="text-2xl font-semibold whitespace-nowrap">질문 및 답변</h1>
            <div class="space-x-2">

            <a
              href="/jquestion/create/"
              target="_blank"
              class="font-medium inline-flex items-center justify-center px-4 py-1 space-x-1 bg-red-500 text-white rounded-md shadow animate-bounce hover:bg-red-600"
            >

              <span>질문 등록하기</span>
            </a>
            </div>
          </div>

<div class="flex flex-col mt-6">
            <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
              <div class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
                <div class="overflow-hidden border-b border-gray-200 rounded-md shadow-md">
                  <table class="min-w-full overflow-x-scroll divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                      <tr>
                          <th
                          scope="col"
                          class="px-3 py-3 text-lg font-medium tracking-wider text-center"
                        >
                          번호
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-lg font-medium tracking-wider text-center"
                        >
                          제목
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-lg font-medium tracking-wider text-center"
                        >
                          닉네임
                        </th>
                        <th
                          scope="col"
                          class="px-4 py-3 text-lg font-medium tracking-wider text-center"
                        >
                          상태
                        </th>
                        <th
                          scope="col"
                          class="px-6 py-3 text-lg font-medium tracking-wider text-center"
                        >
                          등록일자
                        </th>

                      </tr>
                    </thead>

                      <tbody>
        {% if jquestion_list %}
        {% for jquestion in jquestion_list %}

        <tr class="transition-all hover:bg-gray-100 hover:shadow-lg" onclick="location.href='{% url 'jquestions:detail' jquestion.id %}'" style="cursor:pointer;">
            <td class="px-6 py-4 whitespace-nowrap text-center">
                {{ forloop.counter }}
            </td>
            <td>
                {{ jquestion.subject }}
            </td>
            <td class="text-center"> {{ jquestion.nickname }}</td>
            <td class="text-center">{% if jquestion.answer_set.count > 0 %}
                    <span class="inline-flex px-2 text-xs font-semibold leading-5 text-red-600 bg-red-100 rounded-full">{{ jquestion.answer_set.count }}개의 답변이 등록되었습니다!</span>
                    {% endif %}
            </td>
            <td class="text-center">{{ jquestion.created }}</td>
        </tr>

        {% endfor %}
        {% else %}
        <tr>
            <td colspan="3">질문이 없습니다.</td>
        </tr>
        {% endif %}
                      </tbody>
                  </table></div></div></div></div>

    <div class="flex item-center mx-auto container justify-center mt-4 mb-10">
    {% if page_obj.has_previous %}
    <a href="?page={{page_obj.previous_page_number}}" class="text-teal-500"><i class="fas fa-arrow-left fa-lg"></i></a>
    {% endif %}

    <span class="mx-3 font-medium">{{page_obj.number}} of {{page_obj.paginator.num_pages}} </span>

    {% if page_obj.has_next %}
      <a href="?page={{page_obj.next_page_number}}" class="text-teal-500"><i class="fas fa-arrow-right fa-lg"></i></a>
    {% endif %}

    </div>
        </main>
{% endblock %}